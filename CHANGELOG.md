# Changelog

모든 주목할 만한 변경 사항은 이 파일에 기록됩니다.

## [2026-02-09] v1.3.0 - 와디즈 플랫폼 지원 추가

### 🎉 주요 기능 추가
- **🎯 와디즈 플랫폼 지원**: 새로운 마켓 추가
  - 와디즈 "발송 처리용 주문" 시트 자동 인식
  - 마켓 자동 감지: 고유 컬럼 패턴으로 와디즈 파일 자동 구분
  - 지원 컬럼: 주문번호, 주문상품, 주문수량, 받는분, 받는분 연락처, 배송지주소
  - 발주파일 + 주문관리시트 모두에서 완벽 지원

### ✨ 개선 사항
- **마켓 정렬 순서 업데이트**: 와디즈 마지막 순서로 변경
  - 1순위: 네이버 스마트스토어
  - 2순위: 쿠팡 (DeliveryList)
  - 3순위: 자사몰 (orders)
  - 4순위: ESM (지마켓/옥션)
  - 5순위: 11번가 (allList)
  - 6순위: 와디즈 (발송 처리용 주문) ✨
- **마켓 자동 감지 로직 강화**: 와디즈 컬럼 패턴 추가
  - 모든 마켓 파일 자동 인식 기능 개선

### 📝 문서화
- **README.md 업데이트**
  - 지원 마켓에 와디즈 추가
  - 정렬 순서 업데이트 (마켓 순서 변경)

---

## [2026-02-06] v1.2.0 - 주문관리 고도화 및 자동화 기능 대폭 확장

### 🎉 주요 기능 추가
- **📦 쿠팡 발송 파일 자동 생성**: 쿠팡 원본 파일 + 운송장번호 자동 매칭
  - 원본 Excel 서식 완벽 유지 (셀 스타일, 포맷 보존)
  - 운송장번호 E 표기법 방지 (텍스트 형식으로 저장)
  - 파일명: `쿠팡발송_MMDD_HH.xlsx`
- **📊 품목별 판매 집계**: 주문관리시트 생성 후 제품별 판매량 자동 집계
  - 제품명별 수량 합계 표시
  - 미리 정의된 제품 순서로 정렬 (OH → PH → SH → 기타)
  - 확장 가능한 UI (expander)로 깔끔하게 표시
- **🏪 옥션/지마켓 자동 구분**: ESM 파일에서 주문번호 패턴으로 채널 자동 분류
  - 주문번호 2로 시작 (10자리) → 옥션
  - 주문번호 4로 시작 (10자리) → 지마켓

### ✨ 개선 사항
- **정렬 순서 개선**: 주문관리시트가 발주파일과 동일한 정렬 순서 사용
  - 1차 정렬: 마켓 순서 (네이버 → 쿠팡 → 자사몰 → 지마켓 → 11번가)
  - 2차 정렬: 제품 순서 (OH → PH → SH → 기타)
- **제품명 자동 분류 확장**: 3종 → 9종으로 대폭 확장
  - 기존: OH, PH, SH
  - 추가: 케이블(일반), 케이블s, 휴대폰거치대, 차량번호판, 차량용망치, 도막측정기
- **케이블 구분 로직 개선**: "스위치" 키워드로 케이블 유형 자동 구분
  - "스위치" 포함 → 케이블s
  - "스위치" 미포함 → 케이블(일반)
- **사용법 안내 개선**: 앱 내 사용법 섹션 대폭 확장
  - 발주파일 생성 / 주문관리시트 생성 명확히 구분
  - 단계별 상세 설명 추가
  - 자동 기능 6가지 체크리스트 형태로 정리
  - 생성 파일명과 용도 명시

### 📝 문서화
- **README.md 업데이트**
  - 주문관리시트 사용법 상세 추가
  - 출력 파일 섹션에 쿠팡발송 파일 추가
  - 참고사항에 제품 분류 목록, 정렬 순서, 채널 구분 규칙 추가
- **앱 내 가이드 개선**
  - 사용법 expander에 모든 신규 기능 반영
  - 자동 기능 리스트 명시

### 🛠️ 기술 개선
- **openpyxl 활용 강화**: 셀 스타일 보존 및 텍스트 형식 강제 적용
- **세션 상태 확장**: 쿠팡 발송 파일 및 주문관리 원본 데이터 세션 저장
- **데이터 처리 최적화**: 제품별 집계 및 정렬 로직 효율화

---

## [2026-02-05] v1.1.0 - 주문관리시트 기능 완성

### 🎉 주요 기능 추가
- **📋 주문관리시트 생성**: CJ 송장번호와 마켓 주문시트 자동 매칭
- **📊 데이터 미리보기**: 발주파일 및 주문관리시트 생성 후 데이터 확인
- **🔁 파일 재사용 기능**: 발주파일 생성 시 업로드한 마켓 파일을 주문관리시트에서 재사용
- **🔀 제품 통합**: 같은 주문번호의 제품을 자동으로 합쳐서 표시 (예: OH 2개, PH 1개)

### ✨ 개선 사항
- 파일명 형식 변경: `MMDD_HH` (예: `0205_15.xlsx` = 2월 5일 오후 3시)
- 제품명 자동 정규화: 모든 마켓에서 OH/PH/SH로 자동 분류
- 정렬 순서 개선: OH → PH → SH → 기타 제품 순서
- 주문관리시트 날짜 통일: 당일 날짜로만 기록
- 채널명 수정: 네이버를 '네이버'로 표기 (이전: '스마트스토어')

### 🐛 버그 수정
- 11번가 헤더 처리 개선 (skiprows 재시도 로직)
- 여러 마켓의 컬럼명 유연한 처리 (pick_first_col 함수 추가)
- 날짜 파싱 안전성 개선 (format_date 함수 추가)

---

## [2026-02-04] v1.0.1 - 의존성 및 타임존 수정

### ✨ 개선 사항
- xlrd 의존성 추가 (legacy Excel .xls 파일 지원)
- 타임존 수정: UTC → Asia/Seoul (오후 파일명 올바른 표기)

### 🐛 버그 수정
- xlrd 미설치로 인한 Streamlit Cloud 배포 오류
- 오후 파일명 시간대 오류 수정 (09→16 대신 실제 시간 사용)

---

## [2026-01-29] v1.0.0 - 초기 릴리스

### 🎉 주요 기능
- 📦 다중 마켓 발주 파일 통합
- 🎯 자동 주문 병합 (동일 배송지)
- 📊 발주파일 생성 및 다운로드
- 🏪 지원 마켓:
  - 네이버 스마트스토어
  - 쿠팡
  - 자사몰
  - ESM (지마켓/옥션)
  - 11번가
